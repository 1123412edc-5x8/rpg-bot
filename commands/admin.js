const fs = require('fs');

module.exports = {
    name: 'admin',
        aliases: ['gm', 'ÁÆ°ÁêÜ'],
            async execute(message, args, p, players) {
                    // üîí Ê¨äÈôêÊ™¢Êü•ÔºöË´ãÂãôÂøÖÊää '‰Ω†ÁöÑID' ÊèõÊàê‰Ω†ÁúüÊ≠£ÁöÑ Discord ID
                            const adminIDs = ['1292424394957918248']; 
                                    if (!adminIDs.includes(message.author.id)) {
                                                return message.reply("üö´ Ê¨äÈôê‰∏çË∂≥ÔºåÁÑ°Ê≥ïÂπ≤Ê∂â‰∏ñÁïåÊ≥ïÂâá„ÄÇ");
                                                        }

                                                                const subCommand = args[0];

                                                                        // 1. Áµ¶Áâ©ÂìÅÔºö~admin item @Áé©ÂÆ∂ Áâ©ÂìÅÂêçÁ®± Êï∏Èáè
                                                                                // ‰æãÂ¶ÇÔºö~admin item @Ëá™Â∑± Â∞èÂûãÁîüÂëΩËó•Ê∞¥ 10
                                                                                        if (subCommand === 'item') {
                                                                                                    const target = message.mentions.users.first() || message.author;
                                                                                                                // ËôïÁêÜ‰∏≠ÊñáÂêçÁ®±ÔºöÂêà‰ΩµÊâÄÊúâ args ÂæûÁ¨¨ 2 ÂÄãÈñãÂßãÂà∞ÂÄíÊï∏Á¨¨ 2 ÂÄã (Âõ†ÁÇ∫ÊúÄÂæå‰∏ÄÂÄãÊòØÊï∏Èáè)
                                                                                                                            const count = parseInt(args[args.length - 1]) || 1;
                                                                                                                                        const itemName = args.slice(1, -1).join(' ').replace(/<@!?\d+>/g, '').trim();

                                                                                                                                                    if (!itemName) return message.reply("‚ùå Ë´ãËº∏ÂÖ•Áâ©ÂìÅÂêçÁ®±ÔºÅÁî®Ê≥ïÔºö`~admin item @Áé©ÂÆ∂ Áâ©ÂìÅÂêçÁ®± Êï∏Èáè` ");

                                                                                                                                                                const targetData = players[target.id];
                                                                                                                                                                            if (targetData) {
                                                                                                                                                                                            targetData.inventory = targetData.inventory || {};
                                                                                                                                                                                                            targetData.inventory[itemName] = (targetData.inventory[itemName] || 0) + count;
                                                                                                                                                                                                                            
                                                                                                                                                                                                                                            message.reply(`üéÅ **Á≥ªÁµ±ÈÖçÁôº**ÔºöÂ∑≤Áµ¶‰∫à ${target.username} \`${itemName}\` x${count}ÔºÅ`);
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                        // 2. Áµ¶Èå¢Ôºö~admin money @Áé©ÂÆ∂ Êï∏Èáè
                                                                                                                                                                                                                                                                                else if (subCommand === 'money') {
                                                                                                                                                                                                                                                                                            const target = message.mentions.users.first() || message.author;
                                                                                                                                                                                                                                                                                                        const amount = parseInt(args[args.length - 1]) || 0;
                                                                                                                                                                                                                                                                                                                    const targetData = players[target.id];
                                                                                                                                                                                                                                                                                                                                if (targetData) {
                                                                                                                                                                                                                                                                                                                                                targetData.money += amount;
                                                                                                                                                                                                                                                                                                                                                                message.reply(`üí∞ **Á≥ªÁµ±ÁôºÊîæ**ÔºöÂ∑≤Áµ¶‰∫à ${target.username} $${amount.toLocaleString()} ÈáëÂπ£ÔºÅ`);
                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                            // 3. ‰øÆÂæ©ÁãÄÊÖãÔºö~admin fix @Áé©ÂÆ∂
                                                                                                                                                                                                                                                                                                                                                                                                    else if (subCommand === 'fix') {
                                                                                                                                                                                                                                                                                                                                                                                                                const target = message.mentions.users.first() || message.author;
                                                                                                                                                                                                                                                                                                                                                                                                                            const targetData = players[target.id];
                                                                                                                                                                                                                                                                                                                                                                                                                                        if (targetData) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                        targetData.hp = targetData.maxHp || 100;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        targetData.energy = 12;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        message.reply(`‚ú® **Á•ûËπüÈ°ØÁèæ**ÔºöÂ∑≤ÊÅ¢Âæ© ${target.username} ÁöÑÁîüÂëΩËàáÈ´îÂäõÔºÅ`);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return message.reply("‚ùì **ÁÆ°ÁêÜÂì°Ê¨äÈôêË™™ÊòéÔºö**\n`~admin item @Áé©ÂÆ∂ Áâ©ÂìÅÂêçÁ®± Êï∏Èáè` (ÊîØÊè¥‰∏≠Êñá)\n`~admin money @Áé©ÂÆ∂ Êï∏Èáè`\n`~admin fix @Áé©ÂÆ∂` (ÂõûÊªøË°ÄÈ´î)");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // ÂÑ≤Â≠ò‰øÆÊîπ
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        fs.writeFileSync('./players.json', JSON.stringify(players, null, 2));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            };